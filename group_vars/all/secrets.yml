---
# =========================================================
# Centralized 1Password secret lookups
# =========================================================

# All secrets are resolved at runtime via the 1Password's op CLI (v2+)
# The controller must be signed in to 1Password before running playbooks

# To verify your session:  `op whoami`
# To list available items: `op item list --vault="homeLab"`

onepassword_vault: "homeLab"

# =========================================================
# SSH Public key used by the playbook and injected into
# the ops user's authorized_keys during LXC containers
# & VMs provisioning
# =========================================================

ops_ssh_public_key: >-
  {{ lookup('community.general.onepassword', 'Ops',
     field='public key', vault=onepassword_vault) }}

ssh_public_key_path: "~/.ssh/ops.pub"

github_username: >-
  {{ lookup('community.general.onepassword', 'Chezmoi',
     field='github', vault=onepassword_vault) }}

# =========================================================
# Proxmox API
# =========================================================

# pve_01_api_user: >-
#   {{ lookup('community.general.onepassword', 'PVE-01',
#      field='apiUser', section='API', vault=onepassword_vault) }}
# 
# pve_01_api_token_id: >-
#   {{ lookup('community.general.onepassword', 'PVE-01',
#      field='tokenID', section='API', vault=onepassword_vault) }}
# 
# pve_01_api_token_secret: >-
#   {{ lookup('community.general.onepassword', 'PVE-01',
#      field='tokenSecret', section='API', vault=onepassword_vault) }}
# 
# pve_02_api_user: >-
#   {{ lookup('community.general.onepassword', 'PVE-02',
#      field='apiUser', section='API', vault=onepassword_vault) }}
# 
# pve_02_api_token_id: >-
#   {{ lookup('community.general.onepassword', 'PVE-02',
#      field='tokenID', section='API', vault=onepassword_vault) }}
# 
# pve_02_api_token_secret: >-
#   {{ lookup('community.general.onepassword', 'PVE-02',
#      field='tokenSecret', section='API', vault=onepassword_vault) }}

# =========================================================
# Plex
# =========================================================

# Refresh claim token at https://plex.tv/claim before running!
plex_claim_token: >-
  {{ lookup('community.general.onepassword', 'Plex',
     field='claimToken', vault=onepassword_vault) }}

# =========================================================
# Chezmoi – dot Files
# =========================================================

chezmoi_email: >-
  {{ lookup('community.general.onepassword', 'Chezmoi',
     field='email', vault=onepassword_vault) }}

chezmoi_fullname: >-
  {{ lookup('community.general.onepassword', 'Chezmoi',
     field='name', vault=onepassword_vault) }}

# =========================================================
# Samba Users — Albert.D5E.dev
# =========================================================

albert_samba_users:
  - name: >-
      {{ lookup('community.general.onepassword', 'PVE-02',
         field='userName1', section='Albert', vault=onepassword_vault) }}
    password: >-
      {{ lookup('community.general.onepassword', 'PVE-02',
         field='password1', section='Albert', vault=onepassword_vault) }}
  - name: >-
      {{ lookup('community.general.onepassword', 'PVE-02',
         field='userName2', section='Albert', vault=onepassword_vault) }}
    password: >-
      {{ lookup('community.general.onepassword', 'PVE-02',
         field='password2', section='Albert', vault=onepassword_vault) }}
  - name: >-
      {{ lookup('community.general.onepassword', 'PVE-02',
         field='userName3', section='Albert', vault=onepassword_vault) }}
    password: >-
      {{ lookup('community.general.onepassword', 'PVE-02',
         field='password3', section='Albert', vault=onepassword_vault) }}